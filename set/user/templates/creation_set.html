{% extends 'base_user.html' %}

{% load static %}

{% block content %}




<div style="margin: auto; width:500px; height:50px; border: solid 1px; display: flex; justify-content: center; align-items: center;" >Création d'un set</div>


<form style="margin: auto; margin-top: 50px; margin-bottom: 30px; width:700px; border: solid 1px; display: flex; flex-direction: column; align-items: center;"  method="post" action="../creation_set/" enctype="multipart/form-data" >
	{% csrf_token %}
	<div id="ecran_previsualisation" style="background: silver; width:600px; height: 150px; overflow: hidden; border: solid rgb(173, 225, 255) 1px;" >
		<img id="image_ecran_previsualisation" style="width: 100%;" src="">
	</div>
	<div style="margin-top: 25px;" >{{  create_set_form.file  }}</div>
	<div style="margin-top: 25px;" >{{  create_set_form.name  }}</div>
	<div style="margin-top: 25px;" >{{  create_set_form.type_set  }}</div>
	<div style="margin-top: 25px;" >{{  create_set_form.description  }}</div>

	<button type="submit" class="btn btn-success" style="margin: auto; margin-top: 30px;" >Créer le set</button>

	<script>

    (function() {
 
        function createThumbnail(file) {
            var reader = new FileReader();
            reader.addEventListener('load', function() {
                document.querySelector('#image_ecran_previsualisation').src = this.result;
            }, false);
            reader.readAsDataURL(file);
        }

        var allowedTypes = ['png', 'jpg', 'jpeg', 'gif'],
            fileInput = document.querySelector('#id_file');
 
        fileInput.addEventListener('change', function() {

            var files = this.files,
                filesLen = files.length,
                imgType;
 
            for (var i = 0 ; i < filesLen ; i++) {
                imgType = files[i].name.split('.');
                imgType = imgType[imgType.length - 1];

                if(allowedTypes.indexOf(imgType) != -1) {
                    createThumbnail(files[i]);
                }
 
            }
 
        }, false);
 
    })();

    </script>

</form>



{% endblock %}